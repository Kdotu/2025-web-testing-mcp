# MCP 웹페이지 테스트 시스템 고도화 작업 계획

**프로젝트 시작일**: 2025-07-29  
**1차 고도화 작업 시작일** : 2025-08-11  
**2차 고도화 작업 시작일** : 2025-08-18

**목표**: MCP를 활용한 웹사이트 테스트 시스템 고도화 및 확장  
**현재 상태**: 기본 시스템 구축 완료 (94%), 고도화 단계 진입  
**2차 고도화 완료 목표**: 2025년 8월 25일

## 📋 전체 개발 로드맵

### Phase 1-9: 기본 시스템 구축 ✅ 완료
- [x] **Phase 1**: 백엔드 인프라 구축
- [x] **Phase 2**: MCP 서버 연결
- [x] **Phase 3**: API 엔드포인트 구현
- [x] **Phase 4**: 프론트엔드 연동
- [x] **Phase 5**: 상세 메트릭 시스템
- [x] **Phase 6**: 문서화 기능
- [x] **Phase 7**: 배포 및 인프라
- [x] **Phase 8**: 테스트 결과 시각화
- [x] **Phase 9**: 실제 MCP 서버 기반 통합

### Phase 10: 핵심 기능 우선 구현 (8월 18일 ~ 8월 23일) - 6일 🔄 진행 중

#### **10.1 MCP 서버 문제 해결 및 단위테스트 시스템 구현 (8월 18일 ~ 8월 19일) - 2일**
- [ ] **10.1.1** k6 MCP 서버 문제 해결 (우선순위 1)
  - [ ] k6 MCP 서버 타임아웃 문제 진단 및 분석
  - [ ] Child Process + stdin/stdout 방식의 한계점 파악
  - [ ] k6 MCP 서버 실행 안정성 개선
  - [ ] 타임아웃 오류 해결 및 프로세스 관리 최적화

- [ ] **10.1.2** Playwright MCP 서버 문제 해결 (우선순위 2)
  - [ ] Playwright MCP 서버 연결 문제 진단 및 분석
  - [ ] 연결 및 실행 로직 문제 해결
  - [ ] MCP 서버와 직접 실행 방식 병행 지원 구현

- [ ] **10.1.3** Playwright 기반 단위테스트 엔진 구축
  - [ ] 웹페이지 입력값 기반 테스트 시나리오 생성 시스템
  - [ ] 단위테스트 결과 데이터 구조 설계 및 DB 스키마 구현
  - [ ] 테스트 실행 결과 DB 저장 및 조회 API 구현

#### **10.2 테스트 설정 관리 페이지 구현 및 배포 최적화 (8월 20일 ~ 8월 21일) - 2일**
- [ ] **10.2.1** 테스트 설정 관리 UI 레이아웃 설계
  - [ ] 설정 메뉴에 테스트 설정 관리 페이지 추가
  - [ ] 테스트 설정 div 레이아웃 및 구조 설계
  - [ ] 반응형 디자인 및 사용자 경험 최적화
  - [ ] 설정 카테고리별 그룹화 및 정렬

- [ ] **10.2.2** 테스트 설정 요소 관리 시스템
  - [ ] 테스트에 지정할 요소명 입력 및 관리
  - [ ] 카테고리 선택 및 분류 시스템
  - [ ] 설정 우선순위 및 중요도 관리
  - [ ] 설정 검색 및 필터링 기능

- [ ] **10.2.3** 백엔드 설정 관리 API 구현
  - [ ] 테스트 설정 CRUD API 엔드포인트
  - [ ] 설정 데이터베이스 스키마 설계
  - [ ] 설정 검증 및 유효성 검사 로직
  - [ ] 설정 버전 관리 및 히스토리 추적

- [ ] **10.2.4** 배포 용량 최적화
  - [ ] MCP 서버 의존성 정리 및 불필요한 패키지 제거
  - [ ] 빌드 파일 및 임시 파일 정리
  - [ ] 경량화된 MCP 서버 구현

#### **10.3 테스트 결과 다운로드 기능 구현 (8월 22일) - 1일**
- [ ] **10.3.1** HTML 리포트 다운로드 시스템 개선
  - [ ] 테스트 결과 HTML 템플릿 개선 및 모던 디자인 적용
  - [ ] 반응형 레이아웃 및 기본 차트 시각화
  - [ ] 로컬 환경 다운로드 문제 해결

- [ ] **10.3.2** PDF 리포트 다운로드 시스템 개선
  - [ ] HTML을 PDF로 변환하는 기능 개선
  - [ ] PDF 템플릿 디자인 및 스타일링 개선
  - [ ] 로컬 환경 다운로드 문제 해결

#### **10.4 Lighthouse MCP 서버 문제 해결 (8월 23일) - 1일**
- [ ] **10.4.1** Lighthouse MCP 서버 실행 오류 분석 및 수정
  - [ ] CLI 실행은 되지만 실제 테스트 실행 시 오류 발생 문제 진단
  - [ ] Child Process + stdin/stdout 방식의 한계점 분석
  - [ ] Lighthouse MCP 서버 실행 안정성 개선
  - [ ] 테스트 실행 오류 해결 및 결과 파싱 개선

### Phase 11: 부가 기능 및 시스템 안정화 (8월 24일 ~ 8월 25일) - 2일

#### **11.1 MCP 서버 연결 방식 개선 (8월 24일) - 1일**
- [ ] **11.1.1** Playwright MCP 서버 연결 방식 개선
  - [ ] 현재 JSON 기반 stdin/stdout 방식 검토
  - [ ] 실제 @playwright/mcp 패키지 기반 연결 방식으로 변경
  - [ ] Playwright MCP 서버 정상 실행 확인

- [ ] **11.1.2** Lighthouse MCP 서버 연결 방식 개선
  - [ ] 현재 연결 방식 검토
  - [ ] 실제 lighthouse-mcp 패키지 기반 연결 방식으로 변경
  - [ ] Lighthouse MCP 서버 정상 실행 확인

#### **11.2 시스템 안정화 및 최적화 (8월 25일) - 1일**
- [ ] **11.2.1** MCP 서버 실행 환경 최적화
  - [ ] 현재 Child Process + stdin/stdout 방식의 한계점 분석
  - [ ] MCP 서버 프로세스 관리 및 리소스 정리 로직 개선
  - [ ] MCP 서버 실행 시 메모리 누수 방지
  - [ ] 동시 실행 시 프로세스 충돌 방지 로직 구현

- [ ] **11.2.2** 에러 핸들링 및 로깅 시스템 강화
  - [ ] MCP 서버 연결 실패 시 재시도 메커니즘 구현
  - [ ] 상세한 에러 로그 및 디버깅 정보 제공
  - [ ] 사용자 친화적인 에러 메시지 표시
  - [ ] 에러 발생 시 자동 복구 로직 구현

- [ ] **11.2.3** 테스트 검증 및 상태 관리 시스템 보완
  - [ ] 테스트 실행 상태 검증 로직 구현
  - [ ] 테스트 실행 화면 상태 업데이트 개선
  - [ ] 테스트 결과 검증 및 일관성 보장

## 🎯 **조정된 고도화 작업 우선순위 및 일정**

### **1단계 (8월 18일 ~ 8월 19일): k6 MCP 서버 문제 해결 + Playwright MCP 서버 문제 해결 + 단위테스트 시스템**
- **Phase 10.1**: k6 → Playwright 순서로 MCP 서버 문제 해결 및 단위테스트 엔진 구축

### **2단계 (8월 20일 ~ 8월 21일): 테스트 설정 관리 + 배포 최적화**
- **Phase 10.2**: 테스트 설정 관리 시스템 및 배포 용량 최적화

### **3단계 (8월 22일): 결과 다운로드 기능**
- **Phase 10.3**: 테스트 결과 다운로드 기능 개선

### **4단계 (8월 23일): Lighthouse MCP 서버 문제 해결**
- **Phase 10.4**: Lighthouse MCP 서버 실행 오류 해결

### **5단계 (8월 24일 ~ 8월 25일): 시스템 안정화**
- **Phase 11**: MCP 서버 개선 및 시스템 안정화

## 📊 **조정된 완료 일정**

- **Phase 10**: 8월 18일 ~ 8월 23일 (6일) - **MCP 서버 문제 해결 + 핵심 기능 구현**
- **Phase 11**: 8월 24일 ~ 8월 25일 (2일) - **시스템 안정화 및 최적화**

**전체 2차 고도화 작업 완성**: **2025년 8월 25일**

## ✅ **이미 구현 완료된 요소들**

### **테스트 타입 잠금 시스템 (100% 완료)**
- [x] 데이터베이스 스키마: `is_locked`, `locked_by`, `lock_type` 컬럼 추가
- [x] 백엔드 서비스: `TestTypeService`에 잠금/해제 로직 구현
- [x] 프론트엔드 UI: Settings.tsx에 잠금 상태 토글 기능 구현
- [x] 모든 테스트 서비스에 잠금 시스템 통합 (Lighthouse, k6, E2E)

### **MCP 서버 기본 구현 (100% 완료)**
- [x] **Lighthouse MCP 서버**: CLI 실행 로직 개선, Windows 환경 대응, 백엔드 연동 완료
- [x] **k6 MCP 서버**: Python 기반 서버 구현, 백엔드 연동 완료
- [x] **Playwright MCP 서버**: Node.js 기반 서버 구현, 백엔드 연동 완료

### **테스트 타입 통일 (100% 완료)**
- [x] 'e2e' → 'playwright' ID 변경 완료
- [x] 데이터베이스 마이그레이션 파일 업데이트 완료
- [x] 모든 서비스에서 일관된 테스트 타입 ID 사용

### **기본 테스트 결과 다운로드 (80% 완료)**
- [x] HTML 리포트 생성 및 다운로드 기능 구현
- [x] PDF 리포트 생성 및 다운로드 기능 구현
- [x] 다운로드 UI 및 API 엔드포인트 구현
- ⚠️ 로컬 환경에서 다운로드 문제 일부 존재 (Phase 10.3에서 해결 예정)

## 🚀 **기대 효과**

### **핵심 기능 구현 효과**
- **단위테스트 시스템**: 웹페이지 입력값 기반 자동화된 테스트 실행
- **테스트 설정 관리**: 체계적인 테스트 설정 관리 및 버전 제어
- **결과 다운로드**: HTML/PDF 형태의 전문적인 테스트 리포트 제공

### **사용자 경험 개선**
- 직관적이고 사용하기 쉬운 테스트 설정 관리
- 자동화된 단위테스트 실행 및 결과 분석
- 전문적인 테스트 리포트 생성 및 다운로드

### **운영 효율성 향상**
- 체계적인 테스트 설정 관리 및 버전 제어
- 자동화된 테스트 실행 및 결과 수집
- 확장 가능한 MCP 서버 아키텍처

## 📝 **현재 개발 상태**

**현재 단계**: Phase 10.1 시작 - MCP 서버 문제 해결 및 단위테스트 시스템 구현  
**최근 작업**: 
1. ✅ **테스트 타입 잠금 시스템 완료** (Phase 10.6)
2. ✅ **Lighthouse MCP 서버 개선 완료** (Phase 10.4)
3. ✅ **테스트 타입 ID 통일 완료** ('e2e' → 'playwright')
4. ✅ **기본 MCP 서버 구현 완료** (Lighthouse, k6, Playwright)
5. ✅ **MCP 서버 작동 문제 및 배포 용량 문제 발견 및 분석 완료**

**다음 작업**: 
1. **k6 MCP 서버 문제 해결** (Phase 10.1.1 - 우선순위 1)
2. **Playwright MCP 서버 문제 해결** (Phase 10.1.2 - 우선순위 2)
3. **Playwright 기반 단위테스트 엔진 구축** (Phase 10.1.3)

**향후 계획**: 8월 25일까지 MCP 서버 문제 해결을 우선으로 하고, 핵심 기능 구현과 병행하여 진행. k6 → Playwright → Lighthouse 순서로 MCP 서버 문제를 해결하고, 단위테스트 시스템 및 테스트 설정 관리 시스템을 포함한 필수 기능에 집중하여 안정적이고 확장 가능한 MCP 시스템 구축

## 📝 개발 노트

### **2025-08-11: 테스트 타입 관리 시스템 개선**

#### **🔧 주요 작업 내용**

**1. 테스트 타입 관리 시스템 개선**
- [x] **데모 모드와 일반 모드 분리**
  - 데모 모드: 기본 제공 테스트 타입만 표시
  - 일반 모드: 사용자 정의 테스트 타입만 표시
  - 오프라인 모드: 기본 테스트 타입 표시

- [x] **불필요한 설정 제거**
  - 하드코딩된 카테고리 우선순위 설정 제거
  - DB 데이터 중심의 단순한 정렬 로직 적용

**2. 컴포넌트 수정**
- [x] **`Settings.tsx`**: 모드별 테스트 타입 필터링 로직 개선
- [x] **`TestExecution.tsx`**: 테스트 타입 불러오기 시 모드별 필터링 적용
- [x] **`api.tsx`**: 데모 모드와 일반 모드에 따른 데이터 반환 로직 분리

**3. 빌드 설정 최적화**
- [x] **`tsconfig.json`**: `baseUrl` 추가로 절대 경로 import 지원

#### **🎯 해결된 문제점**

1. **테스트 타입 관리 혼란 해결** - 사용자가 요청하지 않은 카테고리 우선순위 설정 제거
2. **모드별 데이터 표시 개선** - 데모/일반/오프라인 모드에 따른 적절한 테스트 타입 표시
3. **코드 품질 향상** - 불필요한 하드코딩 제거 및 DB 데이터 중심 구조로 개선

#### **📊 현재 진행상황**

- **Phase 10.1 시작**: MCP 서버 문제 해결 및 단위테스트 시스템 구현 준비
- **전체 진행률**: Phase 10 기준 약 15% 완료 (이미 완료된 요소들 포함)

#### **🔍 다음 작업**

- Phase 10.1.1: k6 MCP 서버 타임아웃 문제 해결 (우선순위 1)
- Phase 10.1.2: Playwright MCP 서버 연결 문제 해결 (우선순위 2)
- Phase 10.1.3: Playwright 기반 단위테스트 엔진 구축

### **2025-08-18: 2차 고도화 작업 시작 및 우선순위 조정**

#### **🔧 주요 작업 내용**

**1. 우선순위 재조정**
- **핵심 기능 우선**: 단위테스트 + 테스트 설정 관리 + 결과 다운로드
- **부가 기능 후순위**: MCP 서버 개선 + 시스템 안정화
- **일정 단축**: 8월 25일까지 완료 목표

**2. 이미 구현 완료된 요소들 정리**
- ✅ **테스트 타입 잠금 시스템**: 100% 완료
- ✅ **MCP 서버 기본 구현**: 100% 완료 (Lighthouse, k6, Playwright)
- ✅ **테스트 타입 통일**: 100% 완료 ('e2e' → 'playwright')
- ✅ **기본 테스트 결과 다운로드**: 80% 완료

**3. 새로운 개발 계획**
- **Phase 10**: MCP 서버 문제 해결 + 핵심 기능 우선 구현 (6일)
- **Phase 11**: 부가 기능 및 시스템 안정화 (2일)

#### **🎯 해결된 문제점**

1. **테스트 타입 관리 혼란 해결** - 'e2e'와 'playwright' ID 통일
2. **MCP 서버 기본 기능 완성** - Lighthouse, k6, Playwright 모두 정상 작동
3. **테스트 타입 보호 시스템 완성** - 잠금/해제 기능으로 설정 변경 방지

#### **📊 현재 진행상황**

- **Phase 10.1 시작**: MCP 서버 문제 해결 및 단위테스트 시스템 구현 준비
- **전체 진행률**: Phase 10 기준 약 15% 완료 (이미 완료된 요소들 포함)

#### **🔍 다음 작업**

- Phase 10.1.1: k6 MCP 서버 타임아웃 문제 해결 (우선순위 1)
- Phase 10.1.2: Playwright MCP 서버 연결 문제 해결 (우선순위 2)
- Phase 10.1.3: Playwright 기반 단위테스트 엔진 구축

### **2025-08-18: MCP 서버 작동 문제 및 배포 용량 문제 발견**

#### **🚨 발견된 주요 문제점**

**1. MCP 테스트 서버 작동 문제**
- ❌ **Lighthouse MCP 서버**: CLI 실행은 되지만 실제 테스트 실행 시 오류 발생
- ❌ **k6 MCP 서버**: 타임아웃 오류로 인한 테스트 실행 실패
- ❌ **Playwright MCP 서버**: 연결 및 실행 로직에 문제 존재
- ⚠️ **근본 원인**: Child Process + stdin/stdout 방식의 한계 및 프로세스 관리 문제

**2. 배포 시 용량 문제**
- ❌ **MCP 서버 디렉토리**: 각 서버별 의존성 및 빌드 파일로 인한 용량 증가
- ❌ **Node.js 의존성**: Lighthouse, Playwright 등 대용량 패키지들
- ❌ **Python 의존성**: k6 서버 관련 Python 패키지들
- ⚠️ **영향**: 클라우드 배포 시 용량 제한으로 인한 배포 실패 가능성

#### **🔧 문제 해결 방안**

**1. MCP 서버 작동 문제 해결 (Phase 10.1 우선)**
- **단위테스트 시스템**: Playwright MCP 서버 문제 해결 후 구현
- **테스트 실행 방식**: MCP 서버 방식과 직접 실행 방식 병행 지원
- **오류 처리**: MCP 서버 실패 시 자동으로 직접 실행 방식으로 폴백

**2. 배포 용량 최적화 (Phase 10.2 포함)**
- **의존성 정리**: 불필요한 패키지 및 빌드 파일 제거
- **MCP 서버 최적화**: 필수 기능만 포함한 경량화 버전 구현
- **배포 전략**: 개발용과 배포용 MCP 서버 분리

#### **🎯 즉시 해결해야 할 문제**

1. **k6 MCP 서버 타임아웃 문제**: 부하 테스트 실행을 위한 최우선 해결 과제
2. **Playwright MCP 서버 연결 문제**: 단위테스트 시스템 구현을 위한 필수 해결 과제
3. **배포 용량 문제**: 클라우드 배포 성공을 위한 최적화 필요
4. **Lighthouse MCP 서버 문제**: 핵심기능 구현 완료 후 해결 (8월 23일)

