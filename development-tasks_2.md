# MCP 웹페이지 테스트 시스템 고도화 작업 계획

**프로젝트 시작일**: 2025-07-29  
**1차 고도화 작업 시작일** : 2025-08-11

**목표**: MCP를 활용한 웹사이트 테스트 시스템 고도화 및 확장  
**현재 상태**: 기본 시스템 구축 완료 (94%), 고도화 단계 진입  
**1차 고도화 완료 목표**: 2025년 8월 23일

## 📋 전체 개발 로드맵

### Phase 1-9: 기본 시스템 구축 트✅ 완료
- [x] **Phase 1**: 백엔드 인프라 구축
- [x] **Phase 2**: MCP 서버 연결
- [x] **Phase 3**: API 엔드포인트 구현
- [x] **Phase 4**: 프론트엔드 연동
- [x] **Phase 5**: 상세 메트릭 시스템
- [x] **Phase 6**: 문서화 기능
- [x] **Phase 7**: 배포 및 인프라
- [x] **Phase 8**: 테스트 결과 시각화
- [x] **Phase 9**: 실제 MCP 서버 기반 통합

### Phase 10: 보완 미완료 기능 진행 (8월 11일 ~ 8월 15일) - 5일
- [ ] **10.1** 로컬 환경 문서 다운로드 문제 해결 (우선순위 높음) - **일시 보류**
  - [ ] 로컬 환경에서 문서 다운로드 실패 문제 진단
  - [ ] 백엔드 파일 경로 및 권한 문제 해결
  - [ ] 프론트엔드 다운로드 로직 개선
  - [ ] 로컬 환경 테스트 및 검증 (PDF 다운로드 문제 해결 필요)

- [ ] **10.4** MCP 서버 실행 환경 최적화 (우선순위 높음)
  - [ ] 현재 Child Process + stdin/stdout 방식의 한계점 분석
  - [ ] MCP 서버 프로세스 관리 및 리소스 정리 로직 개선
  - [ ] MCP 서버 실행 시 메모리 누수 방지
  - [ ] 동시 실행 시 프로세스 충돌 방지 로직 구현

- [ ] **10.5** 에러 핸들링 및 로깅 시스템 강화 (우선순위 중간)
  - [ ] MCP 서버 연결 실패 시 재시도 메커니즘 구현
  - [ ] 상세한 에러 로그 및 디버깅 정보 제공
  - [ ] 사용자 친화적인 에러 메시지 표시
  - [ ] 에러 발생 시 자동 복구 로직 구현

- [x] **10.6** 테스트 타입 잠금 시스템 기본 구현
  - [x] 테스트 타입별 잠금 상태 관리
  - [x] 잠금된 테스트 타입 삭제 방지 
  - [x] 잠금 상태 시각적 표시 (아이콘, 색상 등)
 

- [ ] **10.7** 테스트 검증 및 상태 관리 시스템 보완 (우선순위 높음)
  - [ ] **10.7.1** 테스트 실행 상태 검증 로직 구현
    - [ ] 테스트가 정상적으로 실행됐는지 확인하는 검증 로직
    - [ ] 데이터 수신 실패 시 테스트 상태를 failed로 변경
    - [ ] 테스트 실행 완료 시 최종 결과 검증 및 상태 업데이트
    - [ ] 로그값과 최종 결과 간 일관성 검증

  - [ ] **10.7.2** 테스트 실행 화면 상태 업데이트 개선
    - [ ] 테스트 실행 완료 시 최근 활동에 실시간 업데이트
    - [ ] 테스트 실행 중인 버튼 상태 정확한 업데이트
    - [ ] 테스트 상태 변경 시 UI 즉시 반영
    - [ ] 테스트 진행 상황 실시간 모니터링

  - [ ] **10.7.3** 테스트 결과 검증 및 일관성 보장
    - [ ] 테스트 종료 후 정상 진행 여부 확인 로직
    - [ ] 로그값과 최종 결과 불일치 시 자동 수정
    - [ ] 테스트 실패 시 명확한 실패 원인 표시
    - [ ] 테스트 상태와 결과 데이터 간 동기화 보장

### Phase 11: MCP 서버 연결 방식 개선 및 테스트 검증 (8월 16일 ~ 8월 19일) - 4일
- [ ] **11.1** Playwright MCP 서버 연결 방식 개선
  - [ ] 현재 JSON 기반 stdin/stdout 방식 검토
  - [ ] 실제 @playwright/mcp 패키지 기반 연결 방식으로 변경
  - [ ] Playwright MCP 서버 정상 실행 확인
  - [ ] E2E 테스트 실행 및 결과 검증

- [ ] **11.2** Lighthouse MCP 서버 연결 방식 개선
  - [ ] 현재 연결 방식 검토
  - [ ] 실제 lighthouse-mcp 패키지 기반 연결 방식으로 변경
  - [ ] Lighthouse MCP 서버 정상 실행 확인
  - [ ] 성능 테스트 실행 및 결과 검증

- [ ] **11.3** 통합 테스트 및 검증
  - [ ] 모든 MCP 서버 연결 방식 통일
  - [ ] 각 테스트 유형별 정상 실행 확인
  - [ ] 결과 데이터베이스 저장 검증
  - [ ] 프론트엔드 결과 표시 검증

- [ ] **11.4** MCP 서버 표준화 및 타입 안전성 향상 (우선순위 높음)
  - [ ] @modelcontextprotocol/sdk 기반 표준 MCP 프로토콜 적용
  - [ ] TypeScript 타입 정의 및 인터페이스 표준화
  - [ ] MCP 서버 간 일관된 에러 처리 방식 구현
  - [ ] MCP 클라이언트 팩토리 패턴 최적화

### Phase 12: 테스트 설정 관리 시스템 구축 (8월 20일 ~ 8월 22일) - 3일

#### **12.1 테스트 설정 관리 페이지 구현**
- [ ] **12.1.1** 테스트 설정 관리 UI 레이아웃 설계
  - [ ] 설정 메뉴에 테스트 설정 관리 페이지 추가
  - [ ] 테스트 설정 div 레이아웃 및 구조 설계
  - [ ] 반응형 디자인 및 사용자 경험 최적화
  - [ ] 설정 카테고리별 그룹화 및 정렬

- [ ] **12.1.2** 테스트 설정 요소 관리 시스템
  - [ ] 테스트에 지정할 요소명 입력 및 관리
  - [ ] 카테고리 선택 및 분류 시스템
  - [ ] 설정 우선순위 및 중요도 관리
  - [ ] 설정 검색 및 필터링 기능

#### **12.2 테스트 설정 데이터 관리**
- [ ] **12.2.1** 백엔드 설정 관리 API 구현
  - [ ] 테스트 설정 CRUD API 엔드포인트
  - [ ] 설정 데이터베이스 스키마 설계
  - [ ] 설정 검증 및 유효성 검사 로직
  - [ ] 설정 버전 관리 및 히스토리 추적

- [ ] **12.2.2** 프론트엔드 설정 관리 로직
  - [ ] 설정 데이터 상태 관리 (React Context/Redux)
  - [ ] 설정 변경 시 자동 저장 기능
  - [ ] 설정 임포트/엑스포트 기능
  - [ ] 설정 백업 및 복원 기능

### Phase 13: 핵심 기능 마무리 (8월 23일) - 1일

#### **13.1 패스워드 기반 잠금 시스템 (기본 기능만)**
- [ ] **13.1.1** 잠금 패스워드 관리
  - [ ] 시스템 잠금 패스워드 설정 및 관리
  - [ ] 패스워드 변경 기능
  - [ ] 패스워드 입력 시도 제한 및 보안

- [ ] **13.1.2** 잠금 시스템 데이터 관리
  - [ ] 잠금 상태 데이터베이스 저장
  - [ ] 잠금 해제 시 로그 기록

#### **13.2 HTML 리포트 기본 개선**
- [ ] **13.2.1** 리포트 디자인 및 레이아웃 개선
  - [ ] 모던하고 반응형 디자인 적용
  - [ ] 테스트 유형별 맞춤형 템플릿 설계 (기본 템플릿만)
  - [ ] 기본 차트 및 그래프 시각화
  - [ ] 모바일/데스크톱 최적화

- [ ] **13.2.2** 리포트 커스터마이징 및 브랜딩
  - [ ] 회사 로고 및 브랜딩 적용
  - [ ] 기본 커스텀 색상 테마 설정
  - [ ] 한국어/영어 기본 다국어 지원

## 🎯 **조정된 고도화 작업 우선순위 및 일정**

### **1단계 (8월 11일 ~ 8월 15일): 긴급 문제 해결 + 잠금 시스템 + 테스트 검증**
- **Phase 10**: 기능 보완 + 테스트 타입 잠금 시스템 + 테스트 검증 시스템 (5일)

### **2단계 (8월 16일 ~ 8월 19일): MCP 서버 연결 방식 개선**
- **Phase 11**: MCP 서버 연결 방식 개선 및 테스트 검증 (4일)

### **3단계 (8월 20일 ~ 8월 23일): 핵심 기능 구현 및 마무리**
- **Phase 12**: 테스트 설정 관리 시스템 구축 (3일)
- **Phase 13**: 패스워드 시스템 + HTML 리포트 개선 (1일)

## 🔧 **기술적 고려사항**

### **테스트 타입 잠금 시스템 (Phase 10.6)**
- 테스트 타입 테이블에 `is_locked` 필드 추가
- 잠금/해제 API 엔드포인트 구현
- 프론트엔드에서 잠금 상태 시각적 표시
- 잠금된 항목 수정/삭제 방지 로직

### **테스트 검증 및 상태 관리 시스템 (Phase 10.7)**
- 테스트 실행 상태 실시간 검증 및 모니터링
- 데이터 수신 실패 시 자동 상태 변경 (completed → failed)
- 로그값과 최종 결과 간 일관성 검증 및 자동 수정
- 테스트 실행 화면 실시간 상태 업데이트
- 테스트 진행 상황 실시간 모니터링 및 UI 반영

### **테스트 설정 관리 시스템**
- 설정 데이터 구조화 및 카테고리별 분류
- 설정 버전 관리 및 히스토리 추적
- 설정 임포트/엑스포트 및 백업 시스템

### **잠금 시스템 보안 (기본 기능만)**
- 단일 패스워드 기반 잠금 해제 시스템
- 잠금 상태 변경 시 기본 로그 기록
- 간단한 패스워드 보안 및 시도 제한

### **MCP 서버 표준화 (핵심만)**
- @modelcontextprotocol/sdk 기반 표준 MCP 프로토콜 구현
- MCP 서버 간 일관된 에러 처리 및 로깅 시스템
- MCP 클라이언트 팩토리 패턴 최적화

### **시스템 안정성 개선 (기본 기능만)**
- 프로세스 생명주기 관리 및 리소스 정리 자동화
- 메모리 누수 방지 및 동시 실행 시 프로세스 충돌 방지
- 에러 발생 시 자동 재시도 및 복구 로직

### **HTML 리포트 개선 (기본 디자인만)**
- 모던하고 반응형 디자인 적용
- 기본 차트 및 시각화
- 회사 로고 및 브랜딩 적용
- 기본 커스터마이징 옵션

## 📊 **조정된 완료 일정**

- **Phase 10**: 8월 11일 ~ 8월 15일 (5일) - **기능 보완 + 잠금 시스템 + 테스트 검증**
- **Phase 11**: 8월 16일 ~ 8월 19일 (4일) - **MCP 서버 개선**
- **Phase 12**: 8월 20일 ~ 8월 22일 (3일) - **테스트 설정 관리**
- **Phase 13**: 8월 23일 (1일) - **패스워드 시스템 + 리포트 개선**

**전체 2차 고도화 작업 완성**: **2025년 8월 23일**

## 🚀 **기대 효과**

### **기술적 효과**
- 표준 MCP 프로토콜 기반의 안정적인 서버 아키텍처 구축
- 체계적인 테스트 설정 관리 시스템
- 간단하고 효과적인 테스트 타입 보호 시스템
- 안정적이고 빠른 테스트 실행 환경 제공

### **사용자 경험 개선**
- 직관적이고 사용하기 쉬운 테스트 설정 관리
- 간단하고 효과적인 테스트 타입 보호 시스템
- 안정적이고 빠른 테스트 실행 환경 제공
- 기본적인 커스터마이징 가능한 리포트

### **운영 효율성 향상**
- 체계적인 테스트 설정 관리 및 버전 제어
- 간단한 패스워드로 설정 변경 및 삭제 방지
- 자동화된 테스트 실행 및 기본 모니터링
- 확장 가능한 MCP 서버 아키텍처

## 📝 **현재 개발 상태**

**현재 단계**: Phase 10.1 완료 - Phase 10.4 시작 준비  
**최근 작업**: 로컬 환경 문서 다운로드 문제 해결 완료, Report 생성 후 자동 다운로드 기능 구현 (2025-08-11)  
**다음 작업**: 
1. **✅ 로컬 환경 문서 다운로드 문제 해결 (Phase 10.1 - 완료)**
2. MCP 서버 실행 환경 최적화 (Phase 10.4)
3. 에러 핸들링 및 로깅 시스템 강화 (Phase 10.5)
4. 테스트 타입 잠금 시스템 기본 구현 (Phase 10.6)
5. 테스트 검증 및 상태 관리 시스템 보완 (Phase 10.7)

**향후 계획**: 8월 23일까지 핵심적인 고도화 완료, 테스트 타입 잠금 시스템 및 테스트 검증 시스템을 포함한 필수 기능에 집중하여 안정적이고 표준화된 MCP 시스템 구축


## 📝 개발 노트

### **2025-08-11: 테스트 타입 관리 시스템 개선**

#### **🔧 주요 작업 내용**

**1. 테스트 타입 관리 시스템 개선**
- [x] **데모 모드와 일반 모드 분리**
  - 데모 모드: 기본 제공 테스트 타입만 표시
  - 일반 모드: 사용자 정의 테스트 타입만 표시
  - 오프라인 모드: 기본 테스트 타입 표시

- [x] **불필요한 설정 제거**
  - 하드코딩된 카테고리 우선순위 설정 제거
  - DB 데이터 중심의 단순한 정렬 로직 적용

**2. 컴포넌트 수정**
- [x] **`Settings.tsx`**: 모드별 테스트 타입 필터링 로직 개선
- [x] **`TestExecution.tsx`**: 테스트 타입 불러오기 시 모드별 필터링 적용
- [x] **`api.tsx`**: 데모 모드와 일반 모드에 따른 데이터 반환 로직 분리

**3. 빌드 설정 최적화**
- [x] **`tsconfig.json`**: `baseUrl` 추가로 절대 경로 import 지원

#### **🎯 해결된 문제점**

1. **테스트 타입 관리 혼란 해결** - 사용자가 요청하지 않은 카테고리 우선순위 설정 제거
2. **모드별 데이터 표시 개선** - 데모/일반/오프라인 모드에 따른 적절한 테스트 타입 표시
3. **코드 품질 향상** - 불필요한 하드코딩 제거 및 DB 데이터 중심 구조로 개선

#### **📊 현재 진행상황**

- **Phase 10.6 완료**: 테스트 타입 잠금 시스템 100% 완료
- **전체 진행률**: Phase 10 기준 약 85% 완료

#### **🔍 다음 작업**

- Phase 10.4: MCP 서버 실행 환경 최적화
- Phase 10.5: 에러 핸들링 및 로깅 시스템 강화
- Phase 10.7: 테스트 검증 및 상태 관리 시스템 보완

